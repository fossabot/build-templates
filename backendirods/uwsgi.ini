[uwsgi]

# will execute as the 'developer' user
#Â NOTE: APIUID is set inside the Dockerfile
# when the developer user is created
uid = $(APIUID)
gid = $(APIUID)

# nginx / www-data?
; uid = 33
; gid = 33

socket = /var/run/uwsgi/uwsgi.sock
; http = 0.0.0.0:3031
chown-socket = www-data:www-data
chmod-socket = 660

; this is all timeouts
harakiri = 2048
http-timeout = 2048
socket-timeout = 2048
socket-send-timeout = 2048
worker-reload-mercy = 2048
reload-mercy = 2048
mule-reload-mercy = 2048

stats = 127.0.0.1:9191
max-requests = 5000

binary-path = /usr/local/bin/uwsgi
chdir = /code
module = $(UWSGI_APP)
; module = run
callable = app
; plugins = python36
pythonpath = /usr/lib/python3.6
pythonpath = /usr/local/lib/python3.6/dist-packages

daemonize = /var/log/uwsgi/%n.log
; logto = /var/log/uwsgi/%n.log

thunder-lock = True
processes = 8
enable-threads = true
threads = 16
master = True
vacuum = True
; die-on-term = True
